<!DOCTYPE HTML>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Taller Web I - Mi perfil</title>

    <!-- Boostrap core css -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>

    <!-- custom style -->
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <link rel="icon" type="image/x-icon" th:href="@{/img/favicon.ico}" />

    <!-- Boostrap core css -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- custom style -->

    <link rel="stylesheet" th:href="@{/css/categorias.css}"/>

</head>

<body>

<!-- Header -->
<div th:replace="~{fragments/header :: userHeader}"></div>

<main role="main" class="container">

    <h2 class="mt-3">¡Bienvenido <span th:text="${usuario.nombre}"></span> <span th:text="${usuario.apellido}"></span>!</h2>
    <div class="accordion accordion-flush mb-3" id="accordionFlushExample2">
        <div class="accordion-item border">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne2" aria-expanded="false" aria-controls="flush-collapseOne2">
                    Tus subastas ganadas
                </button>
            </h2>
            <div id="flush-collapseOne2" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample2">

                <div th:if="${#lists.isEmpty(subastasGanadas)}">
                    <h5 class="m-3">No ganaste ninguna subasta aun.</h5>
                </div>

                <section class="container">
                    <article  class="my-2 row row-cols-1 row-cols-sm-3 row-cols-lg-4 g-4">
                        <div th:each="subasta : ${subastasGanadas}">
                            <div class="card card-subcategoria">
                                <a th:href="@{/ofertar/nuevaOferta(idSubasta=${subasta.id})}" class="text-body text-decoration-none">
                                    <!-- Tiene imagen -->
                                    <img th:if="${subasta.imagenes != null}"
                                         th:src="@{/imagen/{subastaID}/{orden}(subastaID=${subasta.id}, orden=1)}"
                                         class="card-img-top img-cuadrada" th:alt="'Imagen de ' + ${subasta.titulo}" alt="Imagen de subasta">
                                    <!-- No tiene imagen -->
                                    <img th:unless="${subasta.imagenes != null}"
                                         th:src="@{|https://picsum.photos/seed/${subasta.id}/60|}"
                                         class="card-img-top" alt="Imagen genérica">

                                    <div class="card-body">
                                        <input type="hidden" name="idSubasta" id="idSubasta" th:value="${subasta.id}"/>

                                        <p  th:text="${subasta.titulo}" class="card-text descripcion-recortada">Titulo de subasta</p>
                                        <p  th:text="${subasta.descripcion}" class="card-text descripcion-recortada">Descripción de subasta</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </article>
                </section>
            </div>
        </div>
    </div>
</main>
<!-- /.container -->

<!-- Footer -->
<div th:replace="~{fragments/footer :: footer}"></div>

<!-- Boostrap core js -->
<script type="text/javascript" th:src="@{webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>
</body>
</html>